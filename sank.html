<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" contnt="IE=edge">
    <meta name="viewport" content='width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0'>
    <title>Sank</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            font-size: 14pt;
        }
        
        ul {
            list-style: none;
            padding: 0;
        }
        
        ul .inner {
            overflow: hidden;
            display: none;
        }
        
        ul .inner.show {
            display: block;
            /*margin-top: -20px;*/
        }
        
        div .well {
            border: black 1px solid;
            text-align: center;
            margin: 5px 5px;
            display: table;
            box-sizing: border-box;
            float: left;
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-default">
        <div class="container-fluid">
        </div>
    </nav>

    <!-- Content -->
    <section>

        <div class="container">
            <div class="row">
                <dir id="porudzbine"></dir>
            </div>
        </div>
    </section>
    <!-- Content End -->




    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script type="text/javascript">
        var data = [{ "id": 121, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 121, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 121, "konobar": "mile", "sto": 1, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 122, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 122, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 122, "konobar": "mile", "sto": 1, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 123, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 123, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 123, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 125, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 125, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 125, "konobar": "mile", "sto": 1, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 126, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 126, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 126, "konobar": "mile", "sto": 1, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 127, "konobar": "mile", "sto": 1, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 127, "konobar": "mile", "sto": 1, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 127, "konobar": "mile", "sto": 1, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 130, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 130, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 130, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 131, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 131, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 131, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 132, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 132, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 132, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 133, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 133, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 133, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 134, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 134, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 134, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 135, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 135, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 135, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }, { "id": 136, "konobar": "mica", "sto": 3, "artikal": "vranac", "kolicina": 5, "cena": 2500 }, { "id": 136, "konobar": "mica", "sto": 3, "artikal": "tamjanika", "kolicina": 3, "cena": 1500 }, { "id": 136, "konobar": "mica", "sto": 3, "artikal": "borovnica", "kolicina": 12, "cena": 1440 }];

        $(document).ready(function () {

            var categories = [], groupBy = 'id', ul = $('#porudzbine');

            for (var i = 0; i < data.length; i++) {
                if (!categories[data[i][groupBy]])
                    categories[data[i][groupBy]] = [];
                categories[data[i][groupBy]].push(data[i]);
            };


            for (key in categories) {
                if (categories.hasOwnProperty(key)) {
                    //	var li = $('<li>').text('id: ' + key);
                    // console.log(categories);
                    if (categories[key].length) {
                        var ul_inner = $('<ul>');

                        for (var i = 0; i < categories[key].length; i++) {
                            var idPor = categories[key][0].id;
                            var li = $('<div class="well list-group" id="' + idPor + '">').html('<span>' + categories[key][0].sto + ' - ' + categories[key][0].konobar);
                            $('<li class="list-group-item">').html(categories[key][i].artikal + ', ' + categories[key][i].kolicina + ', ' + categories[key][i].cena).appendTo(ul_inner);

                            //$('<ul>').innerHtml(categories[key][i].konobar);
                        }

                        li.append(ul_inner);
                    }

                    li.appendTo(ul);
                }

            }
            $('.list-group').append('<button class="deletePor">hello world</button>');
            //  console.log
            $('.deletePor').click(function () {
                $this = $(this);
                console.log($this.parent()[0].id);

                // ajax put da po≈°alje ID polja
                $.ajax({
                    type: "PUT",
                    url: 'sank',
                    data: $this.parent()[0].id
                    //success: success
                });

                $("#" + $this.parent()[0].id).remove();

                // $this.parent()

            })

        });
    </script>

</body>

</html>